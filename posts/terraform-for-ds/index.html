<!DOCTYPE html>

<html lang="en-us">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="format-detection" content="telephone=no"/>

    <title>Zeyad Deeb</title>
    
    <link rel='icon' href='favicon.ico' type='image/x-icon'/>
    
    <meta name="theme-color" content="#ffffff">

    
    
    
    <link rel="stylesheet" href="https://www.zeyaddeeb.com/css/main.min.07a9cfa1a3a8999e9a21606064f4a147e568dd57c3010c09f068f6a9c274e9ca.css"/>

    
    
    

    
    
 
    
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-76463767-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>
    <body>
        
<nav>
  <header>
    <div class="site-title">
        <a href="/">Zeyad Deeb</a>
    </div>  
</header>
  <div class="nav-menu">
  
    <a class="color-link nav-link" href="/about/">About</a>
  
  <a class="color-link nav-link" href="https://www.zeyaddeeb.com/index.xml" target="_blank" rel="noopener" type="application/rss+xml">RSS</a>
</div>
<footer class="footer">
	<div class="social-icons">
        

    

    

    

    

    

    

    

    

    

    
    <a class="social-icon" href="https://www.linkedin.com/in/zeyaddeeb" target="_blank" rel="noopener" title="LinkedIn">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <path d="M2,3.654102 C2,2.69908141 2.79442509,1.92397846 3.77383592,1.92397846 L24.2261641,1.92397846 C25.2058917,1.92397846 26,2.69908141 26,3.654102 L26,24.3462148 C26,25.3015521 25.2058917,26.0760215 24.2261641,26.0760215 L3.77383592,26.0760215 C2.79442509,26.0760215 2,25.3015521 2,24.3465315 L2,3.65378524 L2,3.654102 Z M9.27526132,22.1415901 L9.27526132,11.2356668 L5.65030092,11.2356668 L5.65030092,22.1415901 L9.27557808,22.1415901 L9.27526132,22.1415901 Z M7.46341463,9.74691162 C8.72727273,9.74691162 9.51409566,8.90940767 9.51409566,7.86284447 C9.49033893,6.79252455 8.72727273,5.97846056 7.48748812,5.97846056 C6.24675325,5.97846056 5.43649034,6.79252455 5.43649034,7.86284447 C5.43649034,8.90940767 6.22299652,9.74691162 7.4396579,9.74691162 L7.46309788,9.74691162 L7.46341463,9.74691162 Z M11.2815965,22.1415901 L14.9062401,22.1415901 L14.9062401,16.0519481 C14.9062401,15.7263225 14.9299968,15.4000634 15.0256573,15.1675641 C15.2876148,14.5159962 15.8840672,13.8416218 16.8856509,13.8416218 C18.1970225,13.8416218 18.7218879,14.8416218 18.7218879,16.3078872 L18.7218879,22.1415901 L22.3465315,22.1415901 L22.3465315,15.8885017 C22.3465315,12.5388027 20.5584416,10.9800443 18.1735825,10.9800443 C16.2182452,10.9800443 15.3595185,12.072854 14.8824834,12.8172315 L14.9065569,12.8172315 L14.9065569,11.2359835 L11.2819132,11.2359835 C11.3291099,12.2591067 11.2815965,22.1419069 11.2815965,22.1419069 L11.2815965,22.1415901 Z"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    
    
    
    <a class="social-icon" href="https://github.com/zeyaddeeb" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    
    
    

    
</div>




	<script src="https://www.zeyaddeeb.com/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js" integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww="></script>
</footer>
</nav>
        <div id="content" class="content-container">
        
<h1 class="post-title">Data Scientists should starting using Terraform</h1>
    <time>December 5, 2020</time>
    <div>
        <p>
        <p>TL; DR:  Data scientists should manage their data infrastructure  with code.
By doing so you can avoid being reliant on engineering departments and also keep better tabs on your costs.</p>
<p>I've had amazing opportunities throughout my career to work with all kinds of data scientists. I've found that not all of us are alike. You don't have to remember by heart how to test for <a href="https://en.wikipedia.org/wiki/Heteroscedasticity">heteroscedasticity</a> in a linear regression model to be a good data scientist. Heck, you barely even need to remember the concept itself. Some data scientists are good with figuring out the best activation function for that type of neural network,  some are good with deployment and at automatically re-training and fine-tuning your models, and others are good with explaining the model's results and visualizing the outputs. Encountering a data scientist who can do, and likes doing, all of these things, would be a rare unicorn indeed.</p>
<p>If you're the kind of data scientist who likes managing their own data infrastructure, keep reading to learn how to deploy a scalable model.</p>
<p>Quick blanket disclaimer before diving into Terraform: I'm not saying here that <a href="https://github.com/hashicorp/hcl">HCL (HashiCorp Configuration Language)</a> is the only way to manage infrastructure. I have my own frustrations with <a href="https://www.terraform.io/">Terraform</a> at times, but overall it's a reliable and battle tested way of getting infrastructure up and running. There are many different tools available to help you accomplish the same goal, so if you're already using something like <a href="https://www.pulumi.com/">Pulumi</a> that's great!</p>
<p>So what is Terraform, and why should you care? From the creators:</p>
<blockquote>
<p>Terraform is a tool for building, changing, and versioning infrastructure safely and efficiently. Terraform can manage existing and popular service providers as well as custom in-house solutions.</p>
</blockquote>
<p>That's a lot to unpack, but for now I'll speak from a data scientist's perspective on why we should be using Terraform more and more.</p>
<p>Let's say you want to build a model that predicts whether a celebrity's name is mentioned in a some text (Name Entity Recognition). For example:</p>
<p>Input: <code>Tom Cruise is overrated</code><br>
Output: <code>[text: Tom Cruise, label: Celebrity, confidence: 0.95]</code></p>
<p>If you're a cool kid who already uses <a href="https://pytorch.org/">Pytorch</a>, you'd likely find yourself completing a laundry list that looks like this:</p>
<ul>
<li>write your model</li>
<li>write your data loader</li>
<li>write your training function</li>
</ul>
<p>&hellip;of course all this happens only <em>after</em> you figure out how to do <a href="https://pytorch.org/docs/stable/optim.html#torch.optim.lr_scheduler.CyclicLR"><code>CyclicLR</code></a>, because you got all hot and bothered by that one paper that mentioned it on <a href="http://arxiv.org/">Arxiv</a>.
At the end of all this trouble, you'll end up with something that looks like this (whatever code that is):</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">torch.nn</span> <span style="color:#007020;font-weight:bold">as</span> <span style="color:#0e84b5;font-weight:bold">nn</span>
<span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">torch.nn.functional</span> <span style="color:#007020;font-weight:bold">as</span> <span style="color:#0e84b5;font-weight:bold">F</span>

<span style="color:#007020;font-weight:bold">class</span> <span style="color:#0e84b5;font-weight:bold">TransformerModel</span>(nn<span style="color:#666">.</span>Module):
<span style="color:#666">.</span><span style="color:#666">.</span><span style="color:#666">.</span>

<span style="color:#007020;font-weight:bold">def</span> <span style="color:#06287e">train</span>():
    model<span style="color:#666">.</span>train() <span style="color:#60a0b0;font-style:italic"># Turn on the train mode</span>
    total_loss <span style="color:#666">=</span> <span style="color:#40a070">0.</span>
    start_time <span style="color:#666">=</span> time<span style="color:#666">.</span>time()
    src_mask <span style="color:#666">=</span> model<span style="color:#666">.</span>generate_square_subsequent_mask(bptt)<span style="color:#666">.</span>to(device)
    <span style="color:#007020;font-weight:bold">for</span> batch, i <span style="color:#007020;font-weight:bold">in</span> <span style="color:#007020">enumerate</span>(<span style="color:#007020">range</span>(<span style="color:#40a070">0</span>, train_data<span style="color:#666">.</span>size(<span style="color:#40a070">0</span>) <span style="color:#666">-</span> <span style="color:#40a070">1</span>, bptt)):
        data, targets <span style="color:#666">=</span> get_batch(train_data, i)
        optimizer<span style="color:#666">.</span>zero_grad()
<span style="color:#666">.</span><span style="color:#666">.</span><span style="color:#666">.</span></code></pre></div>
<p>Once you're done training and evaluating the model and plotting all the charts on how the loss/accuracy/mcc is performing between training/holdout datasets, if everything looks good, then you're ready to deploy this thing and run it on 100 million documents.</p>
<p>You move on to <a href="https://pytorch.org/tutorials/intermediate/flask_rest_api_tutorial.html"><code>Deploying PyTorch Models in Production</code></a> section of the Pytorch documentation. Here data scientists will have different opinions. Some will say, &ldquo;this deployment stuff is not my job,&rdquo; and unceremoniously throw this task over the fence to someone with the word <code>engineer</code> in their title, instead opting to write some documentation on what is going on with <code>with torch.no_grad()</code> for predictions and the different <a href="https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.LabelEncoder.html"><code>LabelEncoder</code></a> used to convert the labels, etc&hellip; Conversely, if you're actually interested in seeing what lies beyond that metaphorical fence, and think, &ldquo;hey, this deployment stuff is interesting,&rdquo; then keep reading.</p>
<h3 id="model-deployment-strategies">Model deployment strategies</h3>
<p>Regardless of what type of deployment strategy you choose, such as FlaskAPI or a fancy FastAPI web service, even if you are a hardcore data scientist who wants to run torchscript and the <code>C++</code> torchserve implementation to server your model, you'll still need to run this code somewhere that is always available and accessible to other services. Most companies now have a cloud environment of some sort, so let's assume we are using AWS (Amazon Web Services), just for simplicity's sake. Terraform can support all the major clouds (aka providers), and you can always check the list of clouds supported <a href="https://www.terraform.io/docs/providers/type/major-index.html">here</a>.</p>
<p>Having AWS (or any other cloud) gives you access to wide variety of services. It's not an understatement to say if you can spend all the money, the sky is the limit, check out the list of products offered <a href="https://aws.amazon.com/products/">here</a>. The core services a data scientist might use are:</p>
<ul>
<li>S3: data storage, where you can store your <code>model.pt</code> for example</li>
<li>EC2: a server that will run your code</li>
<li>Lambda: same idea as EC2 but you don't get to manage the server directly (aka. serverless execution)</li>
<li>RDS: database (postgres, mysql) to store metadata about your models</li>
<li>Redshift/EMR: data warehousing and big data stuff</li>
<li>EKS: if you are into kubernetes like all the cool kids</li>
<li>Sagemaker: a managed service for Machine Learning (it's worth while checking it out)</li>
</ul>
<h3 id="setting-up-your-model-infrastructure-with-terraform--aws">Setting Up Your Model Infrastructure with Terraform &amp; AWS</h3>
<p>Installing terraform is a breeze. If you have Linux/MacOS, I recommend checking out <a href="https://github.com/tfutils/tfenv"><code>tfenv</code></a> to manage all the different versions of terraform.</p>
<p>Installation:</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ brew install tfenv <span style="color:#666">&amp;&amp;</span> tfenv install latest
</code></pre></div><p>If you have a different system, checkout the install instructions for your operating system.</p>
<p>Now you can check which version of terraform you have by running</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ terraform version
<span style="color:#60a0b0;font-style:italic"># Terraform v0.13.5 --&gt; This will be the latest version</span>
</code></pre></div><p>Knowing which terraform version you've got is very important. It's like using Python2 vs Python3 in some cases and not all the features carry over, I'll assume you are using <code>&gt;0.12</code> in the demo here.</p>
<p>Next, to set up AWS credentials, you'll need an AWS account, so you can talk to your administrator to create one, or, if you are the administrator, you'll know what to do. Once you have an account, you can get your AWS Access Key and Access Secret for AWS IAM page, and run the following commands:</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip install awscli <span style="color:#666">&amp;&amp;</span> aws configure
</code></pre></div><p>Follow the setup instructions and then run a quick test:</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aws s3 ls <span style="color:#60a0b0;font-style:italic"># this will list all s3 buckets in the region</span>

2020-12-05 66:66:66 cool-bucket
</code></pre></div><p>Before diving deeper into how to deploy your celebrity named entity model, let's take a light example to get our feet wet.</p>
<h3 id="introductory-example-setting-up-an-s3-bucket-with-terraform">Introductory example: Setting up an S3 Bucket with Terraform</h3>
<p>The <a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs">AWS terraform documentation</a> is pretty extensive. Since Terraform supports multiple clouds, you always want to make sure you have the right provider.</p>
<p>To create a terraform deployment for any AWS service, you can break your code into multiple files or you can dump it all in one file. I'll be doing the one file example here for readability. Regardless of the method you choose, you always want to save your code to <code>main.tf</code>. While the name of your file is not that important, the extension <code>tf</code> is a must.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-terraform" data-lang="terraform"><span style="">t</span><span style="">e</span><span style="">r</span><span style="">r</span><span style="">a</span><span style="">f</span><span style="">o</span><span style="">r</span><span style="">m</span> {
  <span style="">r</span><span style="">e</span><span style="">q</span><span style="">u</span><span style="">i</span><span style="">r</span><span style="">e</span><span style="">d</span><span style="">_</span><span style="">p</span><span style="">r</span><span style="">o</span><span style="">v</span><span style="">i</span><span style="">d</span><span style="">e</span><span style="">r</span><span style="">s</span> {
<span style="color:#4070a0">    aws</span> <span style="color:#666">=</span> {
<span style="color:#4070a0">      source</span>  <span style="color:#666">=</span> <span style="color:#4070a0">&#34;hashicorp/aws&#34;</span>
<span style="color:#4070a0">      version</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;~&gt; 3.0&#34;</span>
    }
  }
}

<span style="color:#007020;font-weight:bold">provider</span> <span style="color:#4070a0">&#34;aws&#34;</span> {
<span style="color:#4070a0">  region</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;us-east-1&#34;</span><span style="color:#60a0b0;font-style:italic"> # you can change if you are in a different country/region
</span><span style="color:#60a0b0;font-style:italic"></span>}

<span style="color:#007020;font-weight:bold">resource</span> <span style="color:#4070a0">&#34;aws_s3_bucket&#34; &#34;bucket&#34;</span> {
<span style="color:#4070a0">  bucket</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;my-super-cool-tf-bucket&#34;</span>
<span style="color:#4070a0">  acl</span>    <span style="color:#666">=</span> <span style="color:#4070a0">&#34;private&#34;</span>

<span style="color:#4070a0">  tags</span> <span style="color:#666">=</span> {
<span style="color:#4070a0">    Name</span>        <span style="color:#666">=</span> <span style="color:#4070a0">&#34;machine-learning&#34;</span><span style="color:#60a0b0;font-style:italic"> # tags are important for cost tracking
</span><span style="color:#60a0b0;font-style:italic"></span><span style="color:#4070a0">    Environment</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;prod&#34;</span>
  }
}</code></pre></div>
<p>There are three main commands to run terraform in your terminal</p>
<p><code>terraform validate</code> : will make sure your syntax is validated<br>
<code>terraform plan</code> : will produce the output of what is about to get executed<br>
<code>terraform apply</code> : will execute your code and create the resources you defined</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aws s3 ls | grep my-super-cool-tf-bucket

2020-12-05 66:66:66 my-super-cool-tf-bucket
</code></pre></div><h3 id="deploying-your-named-entity-model-using-terraform">Deploying your Named Entity Model using Terraform</h3>
<p>We'll be using AWS lambda to deploy the model because we want to reduce costs and ensure high concurrency. If you are trying to run predictions on 100 million documents, you need to do it in a scalable manner without breaking the bank. To achieve full scrooge status, I have previously set up infrastructure with GPU which costs a paltry $20/hour. But that was pretty  exhausting, so if you're looking for a quicker and easier approach, lambda's a good bet.</p>
<p>First off, you'll need to store your model coefficients on that s3 bucket you just created, you can do that by running</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ aws cp model.pt s3://my-super-cool-tf-bucket
</code></pre></div><p>You can also load your tokenizer and other files needed for running your predict function.</p>
<p>We will be using <a href="https://aws.amazon.com/efs/"><code>EFS</code></a> as a data store for the model since some of those models can be big and will not work with the Lambda limits otherwise.</p>
<p>Create a file called <code>providers.tf</code></p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-terraform" data-lang="terraform"><span style="">t</span><span style="">e</span><span style="">r</span><span style="">r</span><span style="">a</span><span style="">f</span><span style="">o</span><span style="">r</span><span style="">m</span> {
  <span style="">r</span><span style="">e</span><span style="">q</span><span style="">u</span><span style="">i</span><span style="">r</span><span style="">e</span><span style="">d</span><span style="">_</span><span style="">p</span><span style="">r</span><span style="">o</span><span style="">v</span><span style="">i</span><span style="">d</span><span style="">e</span><span style="">r</span><span style="">s</span> {
<span style="color:#4070a0">    aws</span> <span style="color:#666">=</span> {
<span style="color:#4070a0">      source</span>  <span style="color:#666">=</span> <span style="color:#4070a0">&#34;hashicorp/aws&#34;</span>
<span style="color:#4070a0">      version</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;~&gt; 3.0&#34;</span>
    }
  }
}

<span style="color:#007020;font-weight:bold">provider</span> <span style="color:#4070a0">&#34;aws&#34;</span> {
<span style="color:#4070a0">  region</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;us-east-1&#34;</span><span style="color:#60a0b0;font-style:italic"> # you can change if you are in a different country/region
</span><span style="color:#60a0b0;font-style:italic"></span>}</code></pre></div>
<p>Now we need to create the EFS in a file called <code>efs.tf</code> (this will also create a VPC along), if you have an existing VPC, <a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/vpc">check out the data source on how to pull existing VPC information</a></p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-terraform" data-lang="terraform"><span style="color:#007020;font-weight:bold">resource</span> <span style="color:#4070a0">&#34;random_pet&#34; &#34;vpc_name&#34;</span> {
<span style="color:#4070a0">  length</span> <span style="color:#666">=</span> <span style="color:#40a070">2</span>
}

<span style="color:#007020;font-weight:bold">module</span> <span style="color:#4070a0">&#34;vpc&#34;</span> {
<span style="color:#4070a0">  source</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;terraform-aws-modules/vpc/aws&#34;</span>

<span style="color:#4070a0">  name</span> <span style="color:#666">=</span> <span style="">r</span><span style="">a</span><span style="">n</span><span style="">d</span><span style="">o</span><span style="">m</span><span style="">_</span><span style="">p</span><span style="">e</span><span style="">t</span>.<span style="">v</span><span style="">p</span><span style="">c</span><span style="">_</span><span style="">n</span><span style="">a</span><span style="">m</span><span style="">e</span>.<span style="">i</span><span style="">d</span>
<span style="color:#4070a0">  cidr</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;10.10.0.0/16&#34;</span>

<span style="color:#4070a0">  azs</span>           <span style="color:#666">=</span> [<span style="color:#4070a0">&#34;us-east-1&#34;</span>]
<span style="color:#4070a0">  intra_subnets</span> <span style="color:#666">=</span> [<span style="color:#4070a0">&#34;10.10.101.0/24&#34;</span>]

<span style="color:#4070a0">  tags</span> <span style="color:#666">=</span> {
<span style="color:#4070a0">    Name</span>        <span style="color:#666">=</span> <span style="color:#4070a0">&#34;machine-learning&#34;</span><span style="color:#60a0b0;font-style:italic"> # tags are important for cost tracking
</span><span style="color:#60a0b0;font-style:italic"></span><span style="color:#4070a0">    Environment</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;prod&#34;</span>
  }

}

<span style="color:#007020;font-weight:bold">resource</span> <span style="color:#4070a0">&#34;aws_efs_file_system&#34; &#34;model_efs&#34;</span> {}

<span style="color:#007020;font-weight:bold">resource</span> <span style="color:#4070a0">&#34;aws_efs_mount_target&#34; &#34;model_target&#34;</span> {
<span style="color:#4070a0">  file_system_id</span>  <span style="color:#666">=</span> <span style="">a</span><span style="">w</span><span style="">s</span><span style="">_</span><span style="">e</span><span style="">f</span><span style="">s</span><span style="">_</span><span style="">f</span><span style="">i</span><span style="">l</span><span style="">e</span><span style="">_</span><span style="">s</span><span style="">y</span><span style="">s</span><span style="">t</span><span style="">e</span><span style="">m</span>.<span style="">s</span><span style="">h</span><span style="">a</span><span style="">r</span><span style="">e</span><span style="">d</span>.<span style="">i</span><span style="">d</span>
<span style="color:#4070a0">  subnet_id</span>       <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">module</span>.<span style="">v</span><span style="">p</span><span style="">c</span>.<span style="">i</span><span style="">n</span><span style="">t</span><span style="">r</span><span style="">a</span><span style="">_</span><span style="">s</span><span style="">u</span><span style="">b</span><span style="">n</span><span style="">e</span><span style="">t</span><span style="">s</span>[<span style="">0</span>]
<span style="color:#4070a0">  security_groups</span> <span style="color:#666">=</span> [<span style="color:#007020;font-weight:bold">module</span>.<span style="">v</span><span style="">p</span><span style="">c</span>.<span style="">d</span><span style="">e</span><span style="">f</span><span style="">a</span><span style="">u</span><span style="">l</span><span style="">t</span><span style="">_</span><span style="">s</span><span style="">e</span><span style="">c</span><span style="">u</span><span style="">r</span><span style="">i</span><span style="">t</span><span style="">y</span><span style="">_</span><span style="">g</span><span style="">r</span><span style="">o</span><span style="">u</span><span style="">p</span><span style="">_</span><span style="">i</span><span style="">d</span>]

<span style="color:#4070a0">  tags</span> <span style="color:#666">=</span> {
<span style="color:#4070a0">    Name</span>        <span style="color:#666">=</span> <span style="color:#4070a0">&#34;machine-learning&#34;</span><span style="color:#60a0b0;font-style:italic"> # tags are important for cost tracking
</span><span style="color:#60a0b0;font-style:italic"></span><span style="color:#4070a0">    Environment</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;prod&#34;</span>
  }

}

<span style="color:#007020;font-weight:bold">resource</span> <span style="color:#4070a0">&#34;aws_efs_access_point&#34; &#34;lambda_ap&#34;</span> {
<span style="color:#4070a0">  file_system_id</span> <span style="color:#666">=</span> <span style="">a</span><span style="">w</span><span style="">s</span><span style="">_</span><span style="">e</span><span style="">f</span><span style="">s</span><span style="">_</span><span style="">f</span><span style="">i</span><span style="">l</span><span style="">e</span><span style="">_</span><span style="">s</span><span style="">y</span><span style="">s</span><span style="">t</span><span style="">e</span><span style="">m</span>.<span style="">s</span><span style="">h</span><span style="">a</span><span style="">r</span><span style="">e</span><span style="">d</span>.<span style="">i</span><span style="">d</span>

  <span style="">p</span><span style="">o</span><span style="">s</span><span style="">i</span><span style="">x</span><span style="">_</span><span style="">u</span><span style="">s</span><span style="">e</span><span style="">r</span> {
<span style="color:#4070a0">    gid</span> <span style="color:#666">=</span> <span style="color:#40a070">1000</span>
<span style="color:#4070a0">    uid</span> <span style="color:#666">=</span> <span style="color:#40a070">1000</span>
  }

  <span style="">r</span><span style="">o</span><span style="">o</span><span style="">t</span><span style="">_</span><span style="">d</span><span style="">i</span><span style="">r</span><span style="">e</span><span style="">c</span><span style="">t</span><span style="">o</span><span style="">r</span><span style="">y</span> {
<span style="color:#4070a0">    path</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;/lambda&#34;</span>
    <span style="">c</span><span style="">r</span><span style="">e</span><span style="">a</span><span style="">t</span><span style="">i</span><span style="">o</span><span style="">n</span><span style="">_</span><span style="">i</span><span style="">n</span><span style="">f</span><span style="">o</span> {
<span style="color:#4070a0">      owner_gid</span>   <span style="color:#666">=</span> <span style="color:#40a070">1000</span>
<span style="color:#4070a0">      owner_uid</span>   <span style="color:#666">=</span> <span style="color:#40a070">1000</span>
<span style="color:#4070a0">      permissions</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;0777&#34;</span>
    }
  }

<span style="color:#4070a0">  tags</span> <span style="color:#666">=</span> {
<span style="color:#4070a0">    Name</span>        <span style="color:#666">=</span> <span style="color:#4070a0">&#34;machine-learning&#34;</span><span style="color:#60a0b0;font-style:italic"> # tags are important for cost tracking
</span><span style="color:#60a0b0;font-style:italic"></span><span style="color:#4070a0">    Environment</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;prod&#34;</span>
  }
}</code></pre></div>
<p>Now we need to create a DataSync to load the model from <code>s3</code> to the <code>efs</code> volume or <code>datasync.tf</code></p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-terraform" data-lang="terraform"><span style="color:#007020;font-weight:bold">resource</span> <span style="color:#4070a0">&#34;aws_datasync_location_s3&#34; &#34;s3_loc&#34;</span> {
<span style="color:#4070a0">  s3_bucket_arn</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;arn&#34;</span><span style="color:#60a0b0;font-style:italic"> # copy the bucket arn you created in the previous step
</span><span style="color:#60a0b0;font-style:italic"></span>}

<span style="color:#007020;font-weight:bold">resource</span> <span style="color:#4070a0">&#34;aws_datasync_location_efs&#34; &#34;efs_loc&#34;</span> {
<span style="color:#4070a0">  efs_file_system_arn</span> <span style="color:#666">=</span> <span style="">a</span><span style="">w</span><span style="">s</span><span style="">_</span><span style="">e</span><span style="">f</span><span style="">s</span><span style="">_</span><span style="">m</span><span style="">o</span><span style="">u</span><span style="">n</span><span style="">t</span><span style="">_</span><span style="">t</span><span style="">a</span><span style="">r</span><span style="">g</span><span style="">e</span><span style="">t</span>.<span style="">m</span><span style="">o</span><span style="">d</span><span style="">e</span><span style="">l</span><span style="">_</span><span style="">t</span><span style="">a</span><span style="">r</span><span style="">g</span><span style="">e</span><span style="">t</span>.<span style="">f</span><span style="">i</span><span style="">l</span><span style="">e</span><span style="">_</span><span style="">s</span><span style="">y</span><span style="">s</span><span style="">t</span><span style="">e</span><span style="">m</span><span style="">_</span><span style="">a</span><span style="">r</span><span style="">n</span>

  <span style="">e</span><span style="">c</span><span style="color:#40a070">2</span><span style="">_</span><span style="">c</span><span style="">o</span><span style="">n</span><span style="">f</span><span style="">i</span><span style="">g</span> {
<span style="color:#4070a0">    security_group_arns</span> <span style="color:#666">=</span> [<span style="color:#007020;font-weight:bold">module</span>.<span style="">v</span><span style="">p</span><span style="">c</span>.<span style="">d</span><span style="">e</span><span style="">f</span><span style="">a</span><span style="">u</span><span style="">l</span><span style="">t</span><span style="">_</span><span style="">s</span><span style="">e</span><span style="">c</span><span style="">u</span><span style="">r</span><span style="">i</span><span style="">t</span><span style="">y</span><span style="">_</span><span style="">g</span><span style="">r</span><span style="">o</span><span style="">u</span><span style="">p</span><span style="">_</span><span style="">i</span><span style="">d</span>]
<span style="color:#4070a0">    subnet_arn</span>          <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">module</span>.<span style="">v</span><span style="">p</span><span style="">c</span>.<span style="">i</span><span style="">n</span><span style="">t</span><span style="">r</span><span style="">a</span><span style="">_</span><span style="">s</span><span style="">u</span><span style="">b</span><span style="">n</span><span style="">e</span><span style="">t</span><span style="">s</span>[<span style="">0</span>]
  }
}

<span style="color:#007020;font-weight:bold">resource</span> <span style="color:#4070a0">&#34;aws_datasync_task&#34; &#34;model_sync&#34;</span> {
<span style="color:#4070a0">  name</span>                     <span style="color:#666">=</span> <span style="color:#4070a0">&#34;named-entity-model-sync-job&#34;</span>
<span style="color:#4070a0">  destination_location_arn</span> <span style="color:#666">=</span> <span style="">a</span><span style="">w</span><span style="">s</span><span style="">_</span><span style="">d</span><span style="">a</span><span style="">t</span><span style="">a</span><span style="">s</span><span style="">y</span><span style="">n</span><span style="">c</span><span style="">_</span><span style="">l</span><span style="">o</span><span style="">c</span><span style="">a</span><span style="">t</span><span style="">i</span><span style="">o</span><span style="">n</span><span style="">_</span><span style="">s</span><span style="color:#40a070">3</span>.<span style="">e</span><span style="">f</span><span style="">s</span><span style="">_</span><span style="">l</span><span style="">o</span><span style="">c</span>.<span style="">a</span><span style="">r</span><span style="">n</span>
<span style="color:#4070a0">  source_location_arn</span>      <span style="color:#666">=</span> <span style="">a</span><span style="">w</span><span style="">s</span><span style="">_</span><span style="">d</span><span style="">a</span><span style="">t</span><span style="">a</span><span style="">s</span><span style="">y</span><span style="">n</span><span style="">c</span><span style="">_</span><span style="">l</span><span style="">o</span><span style="">c</span><span style="">a</span><span style="">t</span><span style="">i</span><span style="">o</span><span style="">n</span><span style="">_</span><span style="">n</span><span style="">f</span><span style="">s</span>.<span style="">s</span><span style="color:#40a070">3</span><span style="">_</span><span style="">l</span><span style="">o</span><span style="">c</span>.<span style="">a</span><span style="">r</span><span style="">n</span>

  <span style="">o</span><span style="">p</span><span style="">t</span><span style="">i</span><span style="">o</span><span style="">n</span><span style="">s</span> {
<span style="color:#4070a0">    bytes_per_second</span> <span style="color:#666">=</span> <span style="">-</span><span style="color:#40a070">1</span>
  }

<span style="color:#4070a0">  tags</span> <span style="color:#666">=</span> {
<span style="color:#4070a0">    Name</span>        <span style="color:#666">=</span> <span style="color:#4070a0">&#34;machine-learning&#34;</span><span style="color:#60a0b0;font-style:italic"> # tags are important for cost tracking
</span><span style="color:#60a0b0;font-style:italic"></span><span style="color:#4070a0">    Environment</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;prod&#34;</span>
  }
}</code></pre></div>
<p>We are almost done, create the lambda that runs the prediction, you will need your predict files and the requirements that needs to be installed (I'll assume you have a <code>model.py</code> and a <code>requirements.txt</code> files), now we can create <code>lambda.tf</code></p>
<p>You'll need to make your code adapt the lambda syntax and load the model from <code>/mnt/shared-storage</code>, so <code>torch.load('/mnt/shared-storage/model.pt')</code></p>
<p>and you'll need to handle the event <code>http/sns</code> (you can read more in the documentation)</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#007020;font-weight:bold">def</span> <span style="color:#06287e">predict</span>(event, ctx):
   <span style="color:#666">.</span><span style="color:#666">.</span><span style="color:#666">.</span>
</code></pre></div><p>To deploy the model, place the files in the same foler</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-terraform" data-lang="terraform"><span style="color:#007020;font-weight:bold">resource</span> <span style="color:#4070a0">&#34;random_pet&#34; &#34;lambda_name&#34;</span> {
<span style="color:#4070a0">  length</span> <span style="color:#666">=</span> <span style="color:#40a070">2</span>
}

<span style="color:#007020;font-weight:bold">module</span> <span style="color:#4070a0">&#34;lambda&#34;</span> {
<span style="color:#4070a0">  source</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;terraform-aws-modules/lambda/aws&#34;</span>

<span style="color:#4070a0">  function_name</span> <span style="color:#666">=</span> <span style="">r</span><span style="">a</span><span style="">n</span><span style="">d</span><span style="">o</span><span style="">m</span><span style="">_</span><span style="">p</span><span style="">e</span><span style="">t</span>.<span style="">l</span><span style="">a</span><span style="">m</span><span style="">b</span><span style="">d</span><span style="">a</span><span style="">_</span><span style="">n</span><span style="">a</span><span style="">m</span><span style="">e</span>.<span style="">i</span><span style="">d</span>
<span style="color:#4070a0">  description</span>   <span style="color:#666">=</span> <span style="color:#4070a0">&#34;Named Entity Recognition Model&#34;</span>
<span style="color:#4070a0">  handler</span>       <span style="color:#666">=</span> <span style="color:#4070a0">&#34;model.predict&#34;</span>
<span style="color:#4070a0">  runtime</span>       <span style="color:#666">=</span> <span style="color:#4070a0">&#34;python3.8&#34;</span>

<span style="color:#4070a0">  source_path</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;${path.module}&#34;</span>

<span style="color:#4070a0">  vpc_subnet_ids</span>         <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">module</span>.<span style="">v</span><span style="">p</span><span style="">c</span>.<span style="">i</span><span style="">n</span><span style="">t</span><span style="">r</span><span style="">a</span><span style="">_</span><span style="">s</span><span style="">u</span><span style="">b</span><span style="">n</span><span style="">e</span><span style="">t</span><span style="">s</span>
<span style="color:#4070a0">  vpc_security_group_ids</span> <span style="color:#666">=</span> [<span style="color:#007020;font-weight:bold">module</span>.<span style="">v</span><span style="">p</span><span style="">c</span>.<span style="">d</span><span style="">e</span><span style="">f</span><span style="">a</span><span style="">u</span><span style="">l</span><span style="">t</span><span style="">_</span><span style="">s</span><span style="">e</span><span style="">c</span><span style="">u</span><span style="">r</span><span style="">i</span><span style="">t</span><span style="">y</span><span style="">_</span><span style="">g</span><span style="">r</span><span style="">o</span><span style="">u</span><span style="">p</span><span style="">_</span><span style="">i</span><span style="">d</span>]
<span style="color:#4070a0">  attach_network_policy</span>  <span style="color:#666">=</span> <span style="color:#902000">true</span>

<span style="color:#4070a0">  file_system_arn</span>              <span style="color:#666">=</span> <span style="">a</span><span style="">w</span><span style="">s</span><span style="">_</span><span style="">e</span><span style="">f</span><span style="">s</span><span style="">_</span><span style="">a</span><span style="">c</span><span style="">c</span><span style="">e</span><span style="">s</span><span style="">s</span><span style="">_</span><span style="">p</span><span style="">o</span><span style="">i</span><span style="">n</span><span style="">t</span>.<span style="">l</span><span style="">a</span><span style="">m</span><span style="">b</span><span style="">d</span><span style="">a</span>.<span style="">a</span><span style="">r</span><span style="">n</span>
<span style="color:#4070a0">  file_system_local_mount_path</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;/mnt/shared-storage&#34;</span>

<span style="color:#4070a0">  tags</span> <span style="color:#666">=</span> {
<span style="color:#4070a0">    Name</span>        <span style="color:#666">=</span> <span style="color:#4070a0">&#34;machine-learning&#34;</span><span style="color:#60a0b0;font-style:italic"> # tags are important for cost tracking
</span><span style="color:#60a0b0;font-style:italic"></span><span style="color:#4070a0">    Environment</span> <span style="color:#666">=</span> <span style="color:#4070a0">&#34;prod&#34;</span>
  }

<span style="color:#4070a0">  depends_on</span> <span style="color:#666">=</span> [<span style="">a</span><span style="">w</span><span style="">s</span><span style="">_</span><span style="">e</span><span style="">f</span><span style="">s</span><span style="">_</span><span style="">m</span><span style="">o</span><span style="">u</span><span style="">n</span><span style="">t</span><span style="">_</span><span style="">t</span><span style="">a</span><span style="">r</span><span style="">g</span><span style="">e</span><span style="">t</span>.<span style="">m</span><span style="">o</span><span style="">d</span><span style="">e</span><span style="">l</span><span style="">_</span><span style="">t</span><span style="">a</span><span style="">r</span><span style="">g</span><span style="">e</span><span style="">t</span>]
}</code></pre></div>
<p>You should be good to go, I glossed over some details on how to run the lambda, but you'll be able to stack-overflow your way through. Once you're done, cleanup is simple. All you have to do is run <code>terraform destroy</code> and it will remove all your resources.</p>
<h3 id="key-takeaways">Key takeaways</h3>
<ol>
<li>You can prototype model training easily without having to rely on engineering departments. This could mean you can move more quickly if those teams are handling large backlogs, or maybe it means you get other cooks out of your kitchen to keep things tidy.</li>
<li>You get added control over your budget and cost tracking by using tags. Giving your team a solid ROI on data science costs helps justify your existence, which feels pretty good.</li>
</ol>
<h3 id="references">References</h3>
<ul>
<li><a href="https://aws.amazon.com/blogs/aws/new-a-shared-file-system-for-your-lambda-functions/">https://aws.amazon.com/blogs/aws/new-a-shared-file-system-for-your-lambda-functions/</a></li>
<li><a href="https://thenewstack.io/tutorial-host-a-serverless-ml-inference-api-with-aws-lambda-and-amazon-efs/">https://thenewstack.io/tutorial-host-a-serverless-ml-inference-api-with-aws-lambda-and-amazon-efs/</a></li>
<li><a href="https://github.com/terraform-aws-modules/terraform-aws-lambda/blob/master/examples/with-efs/main.tf">https://github.com/terraform-aws-modules/terraform-aws-lambda/blob/master/examples/with-efs/main.tf</a></li>
</ul>

        </p>
    </div>
    

    <div class="page-footer">
        <hr class="footer-divider">
        
    </div>


        

<link rel="stylesheet" type="text/css" href="/css/katex.min.css">
<script type="text/javascript" src="/js/katex.min.js"></script>
<script type="text/javascript" src="/js/auto-render.min.js"onload="renderMathInElement(document.body);"></script>

        </div>
        <footer class="footer-mobile">
	<div class="social-icons">
        

    

    

    

    

    

    

    

    

    

    
    <a class="social-icon" href="https://www.linkedin.com/in/zeyaddeeb" target="_blank" rel="noopener" title="LinkedIn">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <path d="M2,3.654102 C2,2.69908141 2.79442509,1.92397846 3.77383592,1.92397846 L24.2261641,1.92397846 C25.2058917,1.92397846 26,2.69908141 26,3.654102 L26,24.3462148 C26,25.3015521 25.2058917,26.0760215 24.2261641,26.0760215 L3.77383592,26.0760215 C2.79442509,26.0760215 2,25.3015521 2,24.3465315 L2,3.65378524 L2,3.654102 Z M9.27526132,22.1415901 L9.27526132,11.2356668 L5.65030092,11.2356668 L5.65030092,22.1415901 L9.27557808,22.1415901 L9.27526132,22.1415901 Z M7.46341463,9.74691162 C8.72727273,9.74691162 9.51409566,8.90940767 9.51409566,7.86284447 C9.49033893,6.79252455 8.72727273,5.97846056 7.48748812,5.97846056 C6.24675325,5.97846056 5.43649034,6.79252455 5.43649034,7.86284447 C5.43649034,8.90940767 6.22299652,9.74691162 7.4396579,9.74691162 L7.46309788,9.74691162 L7.46341463,9.74691162 Z M11.2815965,22.1415901 L14.9062401,22.1415901 L14.9062401,16.0519481 C14.9062401,15.7263225 14.9299968,15.4000634 15.0256573,15.1675641 C15.2876148,14.5159962 15.8840672,13.8416218 16.8856509,13.8416218 C18.1970225,13.8416218 18.7218879,14.8416218 18.7218879,16.3078872 L18.7218879,22.1415901 L22.3465315,22.1415901 L22.3465315,15.8885017 C22.3465315,12.5388027 20.5584416,10.9800443 18.1735825,10.9800443 C16.2182452,10.9800443 15.3595185,12.072854 14.8824834,12.8172315 L14.9065569,12.8172315 L14.9065569,11.2359835 L11.2819132,11.2359835 C11.3291099,12.2591067 11.2815965,22.1419069 11.2815965,22.1419069 L11.2815965,22.1415901 Z"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    
    
    
    <a class="social-icon" href="https://github.com/zeyaddeeb" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    
    
    

    
</div>





	<script src="https://www.zeyaddeeb.com/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js" integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww="></script>
</footer>
    </body>
</html>